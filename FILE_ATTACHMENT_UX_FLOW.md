# File Attachment UX Flow

## Mobile-First Design for iOS

All interactions optimized for touch and mobile constraints.

---

## 1. Upload Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Note Editor       â”‚
â”‚                     â”‚
â”‚  Title: [........]  â”‚
â”‚  Content: [.....]   â”‚
â”‚                     â”‚
â”‚  [ğŸ”—] Toolbar â”€â”€â”€â†’ Tap paperclip button
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File Picker        â”‚
â”‚                     â”‚
â”‚  ğŸ“ Recents         â”‚
â”‚  ğŸ“ iCloud          â”‚
â”‚  ğŸ“ Files           â”‚
â”‚                     â”‚
â”‚  Select file â”€â”€â”€â†’ statement.pdf (2.3 MB)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Validation         â”‚
â”‚                     â”‚
â”‚  âœ… File size OK    â”‚
â”‚  âœ… Type supported  â”‚
â”‚  âœ… Space available â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Uploading...       â”‚
â”‚                     â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 60%     â”‚
â”‚                     â”‚
â”‚  statement.pdf      â”‚
â”‚  2.3 MB             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File Attached      â”‚
â”‚                     â”‚
â”‚  ğŸ“„ statement.pdf   â”‚
â”‚  2.3 MB  âœ“          â”‚
â”‚                     â”‚
â”‚  [Extracting data...]
â”‚  Please wait...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Extraction Done    â”‚
â”‚                     â”‚
â”‚  ğŸ“„ statement.pdf   â”‚
â”‚  2.3 MB             â”‚
â”‚                     â”‚
â”‚  â„¹ï¸ 5 fields        â”‚
â”‚  [Tap to view]      â”‚ â”€â”€â”€â†’ Tap to see extracted data
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Viewing Extracted Data

### Bank Statement Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Extracted Data            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ Account:    â€¢â€¢â€¢â€¢5678        â”‚  â† Masked for security
â”‚                             â”‚
â”‚ Period:     Jan 1 - Jan 31  â”‚
â”‚             2024            â”‚
â”‚                             â”‚
â”‚ Balance:    $4,234.50 $     â”‚  â† Tap to edit
â”‚                             â”‚
â”‚ Transactions: 24            â”‚
â”‚                             â”‚
â”‚ Interest:   $2.15           â”‚
â”‚                             â”‚
â”‚ Fees:       $0.00           â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Transactions (24)]         â”‚  â† Expandable section
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Jan 1   Amazon      -$45  â”‚
â”‚ â€¢ Jan 2   Salary     +$5000 â”‚
â”‚ â€¢ Jan 3   Coffee       -$5  â”‚
â”‚ â€¢ ...                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           [Save]  [Cancel]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Editable Field UI

```
Long-press or tap field:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Closing Balance      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚
â”‚ [Current: $4,234.50] â”‚
â”‚                      â”‚
â”‚ [$___________] â† Editâ”‚
â”‚                      â”‚
â”‚  [Save]  [Cancel]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Invoice Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Extracted Data            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ Vendor:     Acme Corp       â”‚
â”‚                             â”‚
â”‚ Invoice #:  INV-2024-5678   â”‚
â”‚                             â”‚
â”‚ Date:       Jan 15, 2024    â”‚
â”‚                             â”‚
â”‚ Due:        Feb 15, 2024    â”‚
â”‚                             â”‚
â”‚ Amount:     $2,450.00       â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Line Items (5)              â”‚  â† Expandable
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Service A        $1,000.00  â”‚
â”‚ Service B        $1,200.00  â”‚
â”‚ Tax              $  250.00  â”‚
â”‚ ...                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           [Save]  [Cancel]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Receipt Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Extracted Data            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ Merchant:   Whole Foods     â”‚
â”‚                             â”‚
â”‚ Date:       Jan 20, 2024    â”‚
â”‚             3:45 PM         â”‚
â”‚                             â”‚
â”‚ Total:      $87.54          â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Items (6)                   â”‚  â† Expandable
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Organic Milk   Ã— 2  $12.00  â”‚
â”‚ Fresh Berries  Ã— 1  $8.99   â”‚
â”‚ Chicken Breast Ã— 2 $32.98   â”‚
â”‚ ...                         â”‚
â”‚                             â”‚
â”‚ Subtotal:        $84.55     â”‚
â”‚ Tax:              $3.00 (3%)â”‚
â”‚ Total:            $87.54    â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           [Save]  [Cancel]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Space Management

### Space Indicator
Always visible at top of extraction sheet:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2.3 MB / 5 MB used  â”‚ â† Shows remaining space
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘            â”‚ â† Visual bar
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### When Space is Low

```
When user has >4 MB used:

âš ï¸ Warning in attachment chip:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ statement.pdf         â”‚
â”‚ 4.8 MB (almost full!)    â”‚
â”‚                          â”‚
â”‚ [Delete this file to add another]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Delete Flow

```
Long-press or swipe on file chip:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Delete attachment?   â”‚
â”‚                      â”‚
â”‚ statement.pdf        â”‚
â”‚ 2.3 MB               â”‚
â”‚                      â”‚
â”‚ This will free up    â”‚
â”‚ space for a new file â”‚
â”‚                      â”‚
â”‚ [Cancel]  [Delete]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
File deleted from storage
Extracted data removed
Attachment record deleted
Note updated
```

---

## 5. Note Editor Integration

### Before Upload

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bank Statement           â”‚ â† Title
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“] Note toolbar        â”‚ â† File button
â”‚                          â”‚
â”‚ Some notes about...      â”‚ â† Content
â”‚                          â”‚
â”‚ This is where the        â”‚
â”‚ important info goes      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### After Upload

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bank Statement           â”‚ â† Title
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“] Note toolbar        â”‚
â”‚                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ statement.pdf     â”‚ â”‚ â† File attachment chip
â”‚ â”‚ 2.3 MB  âœ“ Complete   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â† Tap to view extracted data
â”‚                          â”‚
â”‚ Some notes about the     â”‚
â”‚ statement from Jan...    â”‚
â”‚                          â”‚
â”‚ Key points:              â”‚
â”‚ - Balance: $4,234       â”‚
â”‚ - Interest earned       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Search Results Integration

### In Main Search

When file extraction is complete, extracted text becomes searchable:

```
Search query: "bank statement january"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Bank Statement            â”‚ â† Note title
â”‚   ğŸ“„ statement.pdf          â”‚
â”‚   Jan 1 - Jan 31, 2024      â”‚ â† Extracted period
â”‚                             â”‚
â”‚   Account balance: $4,234   â”‚ â† Extracted data preview
â”‚   Transactions: 24          â”‚
â”‚                             â”‚
â”‚   ...contains "January"...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### In LLM Search

When user mentions the document in a conversation:

```
User: "What was my account balance in January?"

Assistant context includes:
- Note content
- Extracted bank statement data
- Raw transaction text